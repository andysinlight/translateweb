<!DOCTYPE html>
<html lang="en" xmlns:max-width="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <link type="text/css" rel="stylesheet" href="../css/base.css">

    <script type="application/javascript">
        window.onload = function () {
            getBook(1);
        }

        function getBook(index) {
//            alert(index);
            var request = new XMLHttpRequest();
            request.open("GET", "/bookstore/servlet/client?op=show_home&index="+index);
            request.send();
            request.onreadystatechange = function () {
                if (request.readyState == 4 && request.status == 200) {
                    var page = eval('(' + request.responseText + ')');
                    var bookList = page.data;
                    var content = "";
                    for (var i = 0; i < bookList.length; i++) {
                        var book = bookList[i];
                        content += makeBook(book);
                    }
                    var bottom="";
                    for (var i = 1; i <= page.pageNum; i++) {
                        bottom += "<input type=button value="+i+" onclick=getBook("+i+")>";
//                        alert(bottom);
                    }
                    document.getElementById("pages").innerHTML = bottom;
                    document.getElementById("content").innerHTML = content;
                }
            }
        }

        function makeBook(book) {
            var url = book.path+"\\" + book.img_name;
            url = url.replace(/\\/g,"/");
            var str = "<div ><img src=" + url+ " width=200 height=250><br>" +
                book.name + "<br>" + book.price + "<br>" + book.category_name + "<br></div> <br>";
            return str;
        }


    </script>
</head>
<body>

<div id="content"></div><br/>
<div id="pages"></div>
</body>
</html>